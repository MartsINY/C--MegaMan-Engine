<Entity name="Lightswitch" maxAlive="50">
	<GravityFlip>False</GravityFlip>
	<Collision Enabled="False">
		<Hitbox name="H" x="4" y="4" width="8" height="24" properties="Default" environment="True" pushaway="True">
			<Hits>Solid</Hits>
			<Group>Block</Group>
		</Hitbox>
	</Collision>
	<Tilesheet>images\blocks\lightswitch.png</Tilesheet>
	<Sprite name="On" palette="Tiles" width="16" height="32" tilesheet="images\blocks\lightswitch.png">
		<Hotspot x="0" y="0" />
		<Frame x="0" y="0" duration="0" />
	</Sprite>
	<Sprite name="Off" palette="Tiles" width="16" height="32" tilesheet="images\blocks\lightswitch.png">
		<Hotspot x="0" y="0" />
		<Frame x="16" y="0" duration="0" />
	</Sprite>
	<State name="Start">
		<Initialize>
			<Sprite>
				<Name>On</Name>
			</Sprite>
			<Collision>
				<EnableBox name="H" />
			</Collision>
		</Initialize>
		<Logic />
		<Trigger>
			<Condition>Collision.Touched</Condition>
			<Effect>
				<Call>Darken</Call>
				<State>OffReset</State>
			</Effect>
		</Trigger>
	</State>
	<State name="OffReset">
		<Initialize>
			<Sprite>
				<Name>Off</Name>
			</Sprite>
		</Initialize>
		<Logic />
		<Trigger>
			<Condition>Collision.Touched == False</Condition>
			<Effect>
				<State>Off</State>
			</Effect>
		</Trigger>
	</State>
	<State name="Off">
		<Initialize>
			<Sprite>
				<Name>Off</Name>
			</Sprite>
			<Collision>
				<EnableBox name="H" />
			</Collision>
		</Initialize>
		<Logic />
		<Trigger>
			<Condition>Collision.Touched</Condition>
			<Effect>
				<Call>Lighten</Call>
				<State>OnReset</State>
			</Effect>
		</Trigger>
	</State>
	<State name="OnReset">
		<Initialize>
			<Sprite>
				<Name>On</Name>
			</Sprite>
		</Initialize>
		<Logic />
		<Trigger>
			<Condition>Collision.Touched == False</Condition>
			<Effect>
				<State>Start</State>
			</Effect>
		</Trigger>
	</State>
</Entity>