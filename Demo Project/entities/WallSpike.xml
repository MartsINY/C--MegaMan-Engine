<Entity name="WallSpike" maxAlive="50">
	<GravityFlip>False</GravityFlip>
	<Collision Enabled="False">
		<Hitbox name="H" x="-6" y="-6" width="12" height="12" properties="Default" damage="6" environment="True" pushaway="True">
			<Hits>Player</Hits>
			<Group>Enemy</Group>
			<Group>Deflect</Group>
			<Resist name="ALL" multiply="0" />
		</Hitbox>
	</Collision>
	<Position persistoffscreen="True" />
	<Sprite width="16" height="16" tilesheet="images\enemies\wallspike.png">
		<Hotspot x="8" y="8" />
		<Frame x="32" y="0" duration="5" />
		<Frame x="16" y="0" duration="5" />
		<Frame x="0" y="0" duration="5" />
	</Sprite>
	<State name="Start">
		<Initialize>
			<Collision>
				<EnableBox name="H" />
			</Collision>
			<Flying>True</Flying>
			<FlipSprite />
		</Initialize>
		<Logic />
		<Trigger>
			<Condition>Collision.BlockBottom</Condition>
			<Effect>
				<State>Right</State>
			</Effect>
		</Trigger>
		<Trigger>
			<Condition>Collision.BlockLeft</Condition>
			<Effect>
				<State>Down</State>
			</Effect>
		</Trigger>
		<Trigger>
			<Condition>Collision.BlockTop</Condition>
			<Effect>
				<State>Left</State>
			</Effect>
		</Trigger>
		<Trigger>
			<Condition>Collision.BlockRight</Condition>
			<Effect>
				<State>Up</State>
			</Effect>
		</Trigger>
	</State>
	<State name="Right">
		<Initialize />
		<Logic>
			<Flying />
			<FlipSprite />
			<X direction="Right" magnitude="1" />
			<Y magnitude="0" />
		</Logic>
		<Trigger>
			<Condition>Collision.BlockRight</Condition>
			<Effect>
				<State>Up</State>
			</Effect>
		</Trigger>
		<Trigger>
			<Condition>Collision.BlockBottomWidth &lt; 2</Condition>
			<Effect>
				<State>Down</State>
				<Position>
					<Y base="Inherit" offset="2" direction="Down" />
				</Position>
			</Effect>
		</Trigger>
	</State>
	<State name="Down">
		<Initialize />
		<Logic>
			<Flying />
			<FlipSprite />
			<X magnitude="0" />
			<Y direction="Down" magnitude="1" />
		</Logic>
		<Trigger>
			<Condition>Collision.BlockBottom</Condition>
			<Effect>
				<State>Right</State>
			</Effect>
		</Trigger>
		<Trigger>
			<Condition>Collision.BlockLeftWidth &lt; 2</Condition>
			<Effect>
				<State>Left</State>
				<Position>
					<X base="Inherit" offset="2" direction="Left" />
				</Position>
			</Effect>
		</Trigger>
	</State>
	<State name="Left">
		<Initialize />
		<Logic>
			<Flying />
			<FlipSprite />
			<X direction="Left" magnitude="1" />
			<Y magnitude="0" />
		</Logic>
		<Trigger>
			<Condition>Collision.BlockLeft</Condition>
			<Effect>
				<State>Down</State>
			</Effect>
		</Trigger>
		<Trigger>
			<Condition>Collision.BlockTopWidth &lt; 2</Condition>
			<Effect>
				<State>Up</State>
				<Position>
					<Y base="Inherit" offset="2" direction="Up" />
				</Position>
			</Effect>
		</Trigger>
	</State>
	<State name="Up">
		<Initialize />
		<Logic>
			<Flying />
			<FlipSprite />
			<X magnitude="0" />
			<Y direction="Up" magnitude="1" />
		</Logic>
		<Trigger>
			<Condition>Collision.BlockTop</Condition>
			<Effect>
				<State>Left</State>
			</Effect>
		</Trigger>
		<Trigger>
			<Condition>Collision.BlockRightWidth &lt; 2</Condition>
			<Effect>
				<State>Right</State>
				<Position>
					<X base="Inherit" offset="2" direction="Right" />
				</Position>
			</Effect>
		</Trigger>
	</State>
	<Movement>
		<Flying />
		<FlipSprite />
	</Movement>
</Entity>